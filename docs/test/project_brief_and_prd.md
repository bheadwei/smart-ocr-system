# 專案簡報與產品需求文件 (Project Brief & PRD) - pickle-ocr

---

**文件版本 (Document Version):** `v1.0`
**最後更新 (Last Updated):** `2025-12-19`
**主要作者 (Lead Author):** Kuan-Wei
**審核者 (Reviewers):** Kuan-Wei
**狀態 (Status):** `已批准 (Approved)`

---

## 目錄 (Table of Contents)

1. [專案總覽 (Project Overview)](#第-1-部分專案總覽-project-overview)
2. [商業目標 (Business Objectives) - 「為何做？」](#第-2-部分商業目標-business-objectives---為何做)
3. [使用者故事與允收標準 (User Stories &amp; UAT) - 「做什麼？」](#第-3-部分使用者故事與允收標準-user-stories--uat---做什麼)
4. [範圍與限制 (Scope &amp; Constraints)](#第-4-部分範圍與限制-scope--constraints)
5. [待辦問題與決策 (Open Questions &amp; Decisions)](#第-5-部分待辦問題與決策-open-questions--decisions)

---

**目的**: 本文件旨在定義 pickle-ocr 專案的「為何」與「為誰」，為整個專案設定最高層次的目標和邊界。它是所有後續設計、開發與測試工作的唯一事實來源 (Single Source of Truth)。

---

## 第 1 部分：專案總覽 (Project Overview)

| 區塊                   | 內容                                                                     |
| :--------------------- | :----------------------------------------------------------------------- |
| **專案名稱**     | pickle-ocr (Smart OCR System)                                            |
| **狀態**         | 開發中                                                                   |
| **目標發布日期** | 2025-Q1                                                                  |
| **核心團隊**     | Lead Engineer: kuan-wei                                                  |
| **專案定位**     | 企業級中文 OCR 智能辨識系統，基於 PaddleOCR 引擎的高性能文字辨識解決方案 |

---

## 第 2 部分：商業目標 (Business Objectives) - 「為何做？」

*在投入資源前，我們必須清晰地定義問題、目標使用者和商業價值，避免開發出無人需要的產品。*

| 區塊                                    | 內容                                                                                                                                                                                                                                                                                                                                                                 |
| :-------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. 背景與痛點**                 | **問題陳述：**`<br>`- 現有市場上的 OCR 工具對中文（尤其繁體中文）辨識效果不佳`<br>`- 商業 OCR 解決方案成本高昂，不適合中小型企業`<br>`- 缺乏易於整合至自動化流程的命令列工具`<br>`- 批量處理文件時效率低落，需要人工逐一操作`<br><br>`**影響範圍：**`<br>`- 文件數位化作業效率低下`<br>`- 人工輸入錯誤率高`<br>`- 無法規模化處理大量文件 |
| **2. 策略契合度**                 | - 提供開源、可自建的 OCR 解決方案，降低企業導入門檻`<br>`- 支援本地部署，滿足資料安全與隱私合規需求`<br>`- 整合 PaddleOCR 引擎，利用成熟的深度學習技術`<br>`- 提供 CLI 與 Python API 雙介面，滿足不同使用場景                                                                                                                                                  |
| **3. 成功指標 (Success Metrics)** | -**主要指標**: 中文文件辨識準確率 ≥ 95%`<br>`- **次要指標**: 單張圖片處理時間 < 3 秒 (CPU) / < 1 秒 (GPU)`<br>`- **次要指標**: 支援批量處理 1000+ 張圖片無錯誤                                                                                                                                                                                |

---

## 第 3 部分：使用者故事與允收標準 (User Stories & UAT) - 「做什麼？」

*這是連接「商業需求」與「技術實現」的橋樑。每個使用者故事都應直接對應到下一個階段的 BDD 情境。*

### 核心史詩 (Core Epic) 1: 單一圖片 OCR 辨識

| 使用者故事 ID    | 描述 (As a, I want to, so that)                                                                                                     | 核心允收標準 (UAT)                                                                                                               |
| :--------------- | :---------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------- |
| **US-001** | **As a** 使用者,`<br>`**I want to** 透過命令列處理單一圖片,`<br>`**so that** 我可以快速取得圖片中的文字內容。 | 1. 執行 `smart-ocr process 圖片.png` 成功辨識。`<br>`2. 辨識結果直接顯示在終端機。`<br>`3. 支援 PNG、JPG、BMP、TIFF 格式。 |
| **US-002** | **As a** 使用者,`<br>`**I want to** 指定輸出檔案路徑,`<br>`**so that** 我可以將辨識結果儲存為檔案。           | 1. 使用 `-o` 參數指定輸出路徑。`<br>`2. 檔案成功寫入指定位置。`<br>`3. 支援不同輸出格式 (TXT, JSON, CSV, XLSX)。           |
| **US-003** | **As a** 使用者,`<br>`**I want to** 使用 GPU 加速處理,`<br>`**so that** 我可以更快速地處理大量圖片。          | 1. 使用 `--gpu` 參數啟用 GPU 加速。`<br>`2. 處理速度明顯提升。`<br>`3. GPU 不可用時顯示錯誤提示。                          |

### 核心史詩 (Core Epic) 2: 批量處理功能

| 使用者故事 ID    | 描述 (As a, I want to, so that)                                                                                                     | 核心允收標準 (UAT)                                                                                                             |
| :--------------- | :---------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------- |
| **US-004** | **As a** 使用者,`<br>`**I want to** 批量處理整個資料夾的圖片,`<br>`**so that** 我可以一次處理大量文件。       | 1. 執行 `smart-ocr process ./文件資料夾/` 處理所有圖片。`<br>`2. 顯示處理進度與總結報告。`<br>`3. 跳過非圖片檔案並記錄。 |
| **US-005** | **As a** 使用者,`<br>`**I want to** 遞迴處理包含子資料夾的目錄,`<br>`**so that** 我可以處理複雜的資料夾結構。 | 1. 使用 `-r` 或 `--recursive` 參數啟用遞迴。`<br>`2. 正確掃描所有子資料夾。`<br>`3. 保留原始資料夾結構資訊於輸出。     |

### 核心史詩 (Core Epic) 3: 多格式匯出

| 使用者故事 ID    | 描述 (As a, I want to, so that)                                                                                                    | 核心允收標準 (UAT)                                                                                                                            |
| :--------------- | :--------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------- |
| **US-006** | **As a** 使用者,`<br>`**I want to** 將結果匯出為 JSON 格式,`<br>`**so that** 我可以程式化處理辨識結果。      | 1. 使用 `-f json` 參數指定格式。`<br>`2. JSON 包含完整資訊：文字、信心分數、座標。`<br>`3. 格式符合標準 JSON 語法。                     |
| **US-007** | **As a** 使用者,`<br>`**I want to** 將結果匯出為 CSV/XLSX 格式,`<br>`**so that** 我可以使用 Excel 進行分析。 | 1. 使用 `-f csv` 或 `-f xlsx` 參數。`<br>`2. 檔案可直接用 Excel 開啟，無亂碼。`<br>`3. 包含欄位：檔案名、行號、文字、信心分數、座標。 |

### 核心史詩 (Core Epic) 4: Python API 整合

| 使用者故事 ID    | 描述 (As a, I want to, so that)                                                                                                    | 核心允收標準 (UAT)                                                                                                                                                                |
| :--------------- | :--------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **US-008** | **As a** 開發者,`<br>`**I want to** 透過 Python API 使用 OCR 功能,`<br>`**so that** 我可以整合到現有專案中。 | 1.`from smart_ocr import OCREngine` 成功匯入。`<br>`2. `engine.process_image()` 回傳結果物件。`<br>`3. 結果物件包含 `.text`, `.lines`, `.average_confidence` 屬性。 |
| **US-009** | **As a** 開發者,`<br>`**I want to** 自訂 OCR 配置參數,`<br>`**so that** 我可以針對特定場景優化辨識效果。     | 1.`OCRConfig` 支援自訂參數。`<br>`2. 預設配置 `OCRConfig.for_chinese()` 適用中文。`<br>`3. 支援從環境變數讀取配置。                                                       |

---

## 第 4 部分：範圍與限制 (Scope & Constraints)

*明確定義邊界是專案成功的關鍵。這為 LLM 生成程式碼提供了最重要的「護欄」。*

| 區塊                              | 內容                                                                                                                                                                                                                                                                                                                                                                       |
| :-------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **功能性需求 (In Scope)**   | **核心功能：**`<br>`- 單張圖片 OCR 辨識`<br>`- 批量資料夾處理（含遞迴）`<br>`- 多格式匯出 (TXT, JSON, CSV, XLSX)`<br>`- 命令列介面 (CLI)`<br>`- Python API 介面`<br>`- GPU 加速支援`<br>`- 中文/英文語言支援                                                                                                                                           |
| **非功能性需求 (NFRs)**     | **性能：**`<br>`- 單張圖片 CPU 處理時間 < 3 秒`<br>`- 單張圖片 GPU 處理時間 < 1 秒`<br>`- 記憶體使用量 < 2GB`<br><br>`**相容性：**`<br>`- Python 3.10+`<br>`- Windows / Linux / macOS`<br>`- 支援 PNG, JPG, JPEG, BMP, TIFF 格式`<br><br>`**可維護性：**`<br>`- 程式碼覆蓋率 > 80%`<br>`- 符合 PEP 8 規範`<br>`- 完整的 Type Hints |
| **不做什麼 (Out of Scope)** | - 不支援 PDF 文件直接處理（需先轉換為圖片）`<br>`- 不提供 Web UI 介面`<br>`- 不支援即時影像串流處理`<br>`- 不支援手寫文字辨識`<br>`- 不支援雲端部署 API 服務（僅本地執行）`<br>`- 不支援表格結構辨識與還原                                                                                                                                                       |
| **假設與依賴**              | **假設：**`<br>`- 使用者具備基本命令列操作能力`<br>`- 輸入圖片品質合理（清晰度足夠）`<br>`- 使用者有權限存取輸入/輸出路徑`<br><br>`**依賴：**`<br>`- PaddlePaddle 2.6.2（深度學習框架）`<br>`- PaddleOCR 2.9.1（OCR 引擎）`<br>`- NVIDIA CUDA（GPU 加速，選用）`<br>`- cuDNN 8.x（GPU 加速，選用）                                             |

---

## 第 5 部分：待辦問題與決策 (Open Questions & Decisions)

*記錄在討論過程中出現的、需要進一步澄清的問題或已做出的重要決策。*

| 問題/決策 ID    | 描述                                                                 | 狀態     | 負責人        |
| :-------------- | :------------------------------------------------------------------- | :------- | :------------ |
| **D-001** | 採用 PaddleOCR 作為核心 OCR 引擎，因其對中文辨識效果優異且開源免費。 | [已決定] | Lead Engineer |
| **D-002** | 使用 Python 作為主要開發語言，便於與深度學習框架整合。               | [已決定] | Lead Engineer |
| **D-003** | CLI 工具採用 Click 框架實作，提供良好的使用者體驗。                  | [已決定] | Lead Engineer |
| **D-004** | 專案套件管理使用 uv 取代傳統 pip，提升安裝效率。                     | [已決定] | Lead Engineer |
| **Q-001** | 是否需要支援自訂訓練模型匯入？                                       | [待討論] | Lead Engineer |
| **Q-002** | 是否需要支援版面分析功能（區分標題、段落、表格）？                   | [待討論] | Lead Engineer |
| **Q-003** | 是否需要提供 Docker 映像檔以簡化部署？                               | [待討論] | Lead Engineer |

---

## 附錄：技術規格摘要

### 系統架構

```
pickle-ocr/
├── src/smart_ocr/           # 原始碼
│   ├── __init__.py          # 套件初始化
│   ├── cli.py               # 命令列介面
│   └── core/
│       ├── config.py        # 配置管理
│       └── ocr_engine.py    # OCR 處理引擎
├── tests/                   # 測試套件
│   ├── unit/                # 單元測試
│   └── integration/         # 整合測試
├── output/                  # 輸出目錄
├── pyproject.toml           # 專案配置
└── README.md                # 專案文件
```

### 主要技術棧

| 分類         | 技術         | 版本       |
| :----------- | :----------- | :--------- |
| 程式語言     | Python       | 3.10+      |
| 深度學習框架 | PaddlePaddle | 2.6.2      |
| OCR 引擎     | PaddleOCR    | 2.9.1      |
| CLI 框架     | Click        | Latest     |
| 測試框架     | pytest       | Latest     |
| GPU 支援     | CUDA + cuDNN | 11.x / 8.x |

### CLI 參數一覽表

| 參數            | 簡寫   | 說明                           | 預設值             |
| --------------- | ------ | ------------------------------ | ------------------ |
| `--output`    | `-o` | 輸出檔案路徑                   | 無（顯示在終端機） |
| `--format`    | `-f` | 輸出格式：txt, json, csv, xlsx | txt                |
| `--lang`      | `-l` | 語言：ch（中文）, en（英文）   | ch                 |
| `--gpu`       | -      | 啟用 GPU 加速                  | 停用               |
| `--recursive` | `-r` | 遞迴處理子資料夾               | 停用               |
| `--quiet`     | `-q` | 靜默模式                       | 停用               |

---

**文件審核記錄 (Review History):**

| 日期       | 審核人   | 版本 | 變更摘要/主要反饋                    |
| :--------- | :------- | :--- | :----------------------------------- |
| 2025-12-19 | 技術團隊 | v1.0 | 初版建立，根據 README 與專案結構整理 |
